---
created: 2026-01-01 14:59
updated: 2026-01-01 15:51
tags:
  - 计算机网络
status: seed
aliases:
---

返回 [[../30_Maps/计算机基础能力|计算机基础能力]]

## 一、DNS（找地址的过程）

1. 你输入网址：`https://www.example.com`
	浏览器其实先要知道 **这个域名对应的 IP 地址**。因为在网络层面，通信靠的是 IP，不是名字。
	
2. **DNS 解析步骤（简化版）**：
	
	- **本地缓存**：先查浏览器缓存、操作系统缓存。
	- **hosts 文件**：看本地有没有写死（开发调试常用）。
	- **本地 DNS 服务器**（一般是你家路由器或运营商提供的）。
	- 如果还没结果，就去问更上游的：
		- 根 DNS 服务器（全世界 13 个逻辑根，分布在很多节点）。
		- 顶级域（.com 的权威服务器）。
		- 再到 example.com 的权威 DNS 服务器。
	- 最终拿到一个 IP，比如 `93.184.216.34`。

---

## 二、TCP/IP 四层模型（数据怎么跑的）

可以类比为快递运输：

1. **应用层（HTTP/HTTPS、DNS）**
	
	- 相当于：写信的内容（我要买书 / 发帖 / 上传文件）。
	- 例子：HTTP 请求报文。
		
2. **传输层（TCP/UDP）**
	
	- 相当于：分割内容 → 编号 → 封装信封，保证能完整送到。
	- **TCP** 特点：
		- 三次握手（建立连接）。
		- 数据可靠、有序传输。
	- **UDP** 特点：
		- 无连接，速度快，但不保证送达。常用在视频、语音。
			
3. **网络层（IP 协议）**
	
	- 相当于：在快递单上写上 **寄件人地址**（源 IP）和 **收件人地址**（目的 IP）。
	- 核心功能：路由转发（决定数据包下一站去哪）。
		
4. **数据链路层（以太网、Wi-Fi）**
	
	- 相当于：快递小哥的车轮，负责点到点的搬运。
	- 用 MAC 地址（网卡物理地址）来标记设备。

---

## 三、请求一次网页的完整旅程

以 `https://www.example.com` 为例：

1. **浏览器发起请求**
	
	- 先解析 DNS → 得到 IP，比如 `93.184.216.34`。
		
2. **建立 TCP 连接**
	
	- 浏览器和服务器做三次握手：
		- 你：喂，我要连你（SYN）。
		- 对方：收到，我准备好了（SYN-ACK）。
		- 你：好，那我真的开始发（ACK）。
			
3. **TLS / HTTPS 握手**
	
	- 如果是 HTTPS，还要额外交换证书、公钥，协商加密算法。
		
4. **发送 HTTP 请求**
	
	- 例如：`GET /index.html HTTP/1.1`
	- 传输层 → 拆包 → TCP 可靠传输。
		
5. **数据在路上**
	
	- 网络层：在 IP 协议的帮助下，从路由器 → 运营商 → 跨网关 → 目标服务器。
	- 每一跳用路由表决定下一站走哪。
		
6. **服务器响应**
	
	- 返回 `HTTP/1.1 200 OK` 和网页内容。
		
7. **浏览器渲染**
	
	- 解析 HTML → 请求 CSS/JS/图片 → 重复上面流程。

---

## 四、实践验证

1. **看 DNS 解析过程**

```bash
nslookup www.example.com
dig www.example.com
```

1. **看 TCP 建立过程**（Linux 上）

```bash
curl -v https://www.example.com
```

会打印出 TCP / SSL 握手的细节。

1. **看路由路径**

```bash
traceroute www.example.com   # Linux/Mac
tracert www.example.com      # Windows
```
